<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MyTODOlist | Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="project.css">
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">MyTODOlist</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">TO-DO List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contact.html">Contact Us</a>
                    </li>
                </ul>
                <div class="mx-2 my-1">
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                        data-bs-target="#signupModal">Sign
                        Up</button>
                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                        data-bs-target="#loginModal">Log
                        In</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Sign Up to MyTODOlist</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center">
                        <img class="mb-4" src="TO-DO.png" alt="" width="72" height="57">
                        <h1 class="h3 mb-3 fw-normal">Welcome to MyTODOlist</h1>
                        <h1 class="h3 mb-3 fw-normal">Please Sign Up</h1>

                        <div class="form-floating my-2">
                            <input type="text" class="form-control" id="floatingInput" placeholder="Enter your name">
                            <label for="floatingInput">Your Name</label>
                        </div>
                        <div class="form-floating my-2">
                            <input type="email" class="form-control" id="floatingInputsignup"
                                placeholder="name@example.com">
                            <label for="floatingInputsignup">Email address</label>
                        </div>
                        <div class="form-floating my-2">
                            <input type="password" class="form-control" id="floatingPassword" placeholder="Password">
                            <label for="floatingPassword">Password</label>
                        </div>
                        <div class="form-floating my-2">
                            <input type="password" class="form-control" id="floatingConfirmPassword"
                                placeholder="Password">
                            <label for="floatingConfirmPassword">Confirm Password</label>
                        </div>

                        <div class="checkbox mb-3 mt-3">
                            <label>
                                <input type="checkbox" value="remember-me"> Remember me
                            </label>
                        </div>
                        <button class="w-100 btn btn-lg btn-primary" type="submit" onclick="signin()">Sign Up</button>
                        <p class="mt-5 mb-3 text-muted">© 2017–2022</p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Log In to MyTODOlist</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center">
                        <img class="mb-4" src="TO-DO.png" alt="" width="72" height="57">
                        <h1 class="h3 mb-3 fw-normal">Log In to your account</h1>


                        <div class="form-floating my-2">
                            <input type="email" class="form-control" id="floatingInputlogin"
                                placeholder="name@example.com">
                            <label for="floatingInputlogin">Email address</label>
                        </div>
                        <div class="form-floating my-2">
                            <input type="password" class="form-control" id="floatingPasswordlogin"
                                placeholder="Password">
                            <label for="floatingPasswordlogin">Password</label>
                        </div>


                        <div class="checkbox mb-3 mt-3">
                            <label>
                                <input type="checkbox" value="remember-me"> Remember me
                            </label>
                        </div>
                        <button class="w-100 btn btn-lg btn-primary" type="submit" onclick="login()">Log in</button>
                        <p class="mt-5 mb-3 text-muted">© 2017–2022</p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <section class="para1 my-8">
        <div class="box1 my-4 mx-3 text-white">
            <div class="my-4">
                <div class="mt-4">
                    <h3 class="mt-4 text-white">MyTODOlist</h3>
                </div>
            </div>
            <div>
                <h1 class="mt-4 mb-3 text-center text-warning"><b>Welcome to MyTODOlist</b></h1>
                <h5 class="mt-2 mb-4 text-center text-light"><b>Give an appropriate title to your task, describe it and
                        when you are done with it just delete it</b></h5>
                <div class="ms-5 me-5">
                    <div class="form-group">
                        <label for="title" class="tableHead mt-2 ms-2"><b>Task Title</b></label>
                        <input type="text" class="form-control mt-1" id="title" aria-describedby="emailHelp">
                    </div>

                    <div class="form-group my-4">
                        <label for="description" class="tableHead ms-2"><b>Describe your task</b></label>
                        <textarea class="form-control mt-1" id="description" rows="3"></textarea>
                    </div>
                </div>

                <button type="submit" id="add" class="btn btn-primary my-2 ms-5">Add to List</button>
                <button id="clear" class="btn btn-danger ms-2" onclick="clearlist()">Clear list</button>
            </div>
        </div>

        <div class="mx-3 my-10" id="todolist">
            <div class="text-center text-warning mb-4">
                <h3>Your TO-DO List</h3>
            </div>
            <table class="table text-center" id="myTable">
                <thead class="tableHead">
                    <tr>
                        <th scope="col">Serial No.</th>
                        <th scope="col">Task Title</th>
                        <th scope="col">Describe your task</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody class="text-white" id="table">
                    <tr>
                        <th scope="row"></th>
                        <td></td>
                        <td></td>
                        <td><button class="btn btn-warning btn-sm my-2" id="del" onclick="deleted(index)"></button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <footer class="footer mt-auto py-3">
        <div class="container">
            <span class="text-muted">
                <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Home</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Features</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
                </ul>
                <p class="text-center text-muted">© 2022 MyTODOlist, Inc</p>
            </span>
        </div>
    </footer>

    <script>

        function notify() {
            if (localStorage.getItem('itemsJson') == '[]') {
                // a = alert("Your list is empty. Add some tasks")
                // todolist.style.display = "none";

                document.getElementById('table').innerHTML = `
                <tr>
                    <th scope="row">${"empty"}</th>
                    <td>${"empty"}</td>
                    <td>${"empty"}</td>
                    <td>${"empty"}</td>
                </tr>
                <tr>
                    <th scope="row">${"empty"}</th>
                    <td>${"empty"}</td>
                    <td>${"empty"}</td>
                    <td>${"empty"}</td>
                </tr>
                <tr>
                    <th scope="row">${"..."}</th>
                    <td>${"..."}</td>
                    <td>${"..."}</td>
                    <td>${"..."}</td>
                </tr>`
            }
            // else if (localStorage.getItem('itemsJson') != '[]'){
            //     todolist.style.display = "block";
            //     // getandupdate();
            //     update();
            // }
        }
        // notify();
        setTimeout(notify, 10);
        // clearTimeout(a);

        function getandupdate() {
            tit = document.getElementById('title');
            desc = document.getElementById('description');

            if (localStorage.getItem('itemsJson') == null) {
                console.log("Add btn is clicked");
                itemJsonArray = [];
                itemJsonArray.push([tit.value, desc.value]);
                localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
            }
            else {
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
                itemJsonArray.push([tit.value, desc.value]);
                localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
            }
            update();
        }

        function update() {
            if (localStorage.getItem('itemsJson') == null) {
                itemJsonArray = [];
                localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
            }
            else {
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
            }

            let table = document.getElementById("table")
            let str = ""
            itemJsonArray.forEach((element, index) => {
                str += `
            <tr>
                <th scope="row">${index + 1}</th>
                <td>${element[0]}</td>
                <td>${element[1]}</td>
                <td><button class="btn btn-warning btn-sm my-2" id="del" onclick="deleted(${index})">Delete</button></td>
            </tr>`
            });
            table.innerHTML = str;
        }
        let add = document.getElementById('add')
        add.addEventListener('click', getandupdate)
        update();

        function deleted(Index) {
            console.log("Delete", Index);
            itemJsonArrayStr = localStorage.getItem('itemsJson')
            itemJsonArray = JSON.parse(itemJsonArrayStr);

            itemJsonArray.splice(Index, 1);     // Array del method --> Delete Index element from the array

            localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray));
            update();
        }

        function clearlist() {
            if (confirm("Do you really want to delete this current list ?")) {
                console.log('Clearing the storage')
                localStorage.clear();
                update()
            }
        }

        function signin() {
            alert("You have successfully Signed Up to MyTODOlist.")
        }
        function login() {
            alert("You have successfully Logged In to your account.")
        }
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
</body>

</html>